# Allocation Requests Policy

All allocation requests, mid-quarter or at the start of the year, should be self-contained and include complete details on node-hour-computations such as typical number of nodes and cores per case, typical run time per case and total number of cases planned per quarter.   For large requests, justification for the typical number of nodes per case should be provided based on scaling studies.  A large request is typically at or above 4000 node-hours on Improv, 14000 node-hours on Bebop and 120 GPU node-hours on Swing.  (For select cases, PIs may be requested to provide scaling results for requests below these limits as well).

Please follow the instructions below the "Request Allocation" subsection on the [LCRC Accounts page](https://accounts.lcrc.anl.gov) when creating or updating a project to complete the allocation request.  Please review the sample project report in the link provided below the "Request allocation" box on the allocation page (sections "Experiments planned & size of calculations" and "Large allocation efficiency").  Please do not submit one-line requests stating request is based on past experience/usage. The allocation committee does not have access to this information. Such requests will be considered incomplete and ineligible for review.

The strong scaling study is required to justify the choice of the number of nodes used to compute the node-hour request.  Please present the scaling studies in text form in the "Request allocation" box as shown in the screenshot in the example link.  Do not attach separate .doc/png/pdf files to your allocation request.  A publication which shows scaling on an old machine on a different problem does not qualify as a scaling study.  It can be used as a basis for the scaling study, though.  The scaling study has to justify the use of the nodes to be used in the problem described in the allocation request and conducted on LCRC clusters.  New projects can be granted a small initial allocation to complete the scaling study, if required.

Request for time on all partitions (Bebop, Improv, Swing) should be in node-hours.  The node-hour computations shown in the "Request allocation" box should match the node hours requested for each of the partitions.   Please present your node-hour computations in the format shown in the sample allocation request.  Providing incomplete/inaccurate or unclear information can delay the decision with regard to your allocation request or lead to a reduction in your requested allocation.  PIs might not be granted their full allocation request.  Allocations grants are made by the allocation committee after considering various factors such as the total time available versus the total requests from PIs across the lab, past usage of the PI/project and the computational readiness of the project.

A PI can request a mid-quarter allocation only after the project has exhausted > 90% of the initial allocation.  Please check your balance and include the output of your usage report in the mid-quarter allocation request.  Use the command `sbank-list-allocations -p <project_name>` to check your balance on the partition(s) you are requesting additional allocation.  Without the usage report, the allocation request will be considered incomplete and ineligible for review.

Mid-quarter allocations are not guaranteed.  In the event that the cluster is over-subscribed, no additional mid-quarter allocations will be made - especially to projects that had large initial allocations.  PIs requiring large allocations should supplement their LCRC allocations with other computational resources (ALCF/NERSC or other national platforms supported by the program offices).

Mid-quarter allocation requests are reviewed once a week (Tuesday).  PIs should budget at least one week for a response/decision on their allocation request - longer if the request is inaccurate/incomplete/unclear and does not follow the guidelines provided in the sample project request document. 
The maximum mid-quarter allocation request will be as follows: 2,000 node-hours on Improv, 7,000 node-hours on Bebop, 25 GPU node-hours on Swing or half of the initial allocation, whichever is less. This amount is pro-rated based on the remaining time in the quarter.

No allocations are made within two weeks before the quarter's end
Project renewals are at the start of the fiscal year.  Failing to renew before the allocation deadline results in the project being ineligible for allocation in Q1 (and possibly reduced allocation from Q2-Q4).
    
PIs who expect to use time for all the remaining quarters for a given allocation year (extending from October to September) should enter an allocation request for all quarters.  If a PI has applied for time for only a single quarter, they will not automatically be granted allocations for the next quarter(s).  A new request will be needed and this request will be subject to the mid-quarter allocation rules.

Projects requesting large allocations (>4000 node-hours on Improv, 14000 node-hours on Bebop and 120 GPU node-hours on Swing) should utilize at least 70% of their allocation by the end of the quarter. PIs of large projects should monitor their project usage closely. If the PI expects that less than 70% of their allocated time will be used in that quarter, the PI must send an explanatory email to LCRC support (support@lcrc.anl.gov) at least a month before the end of the quarter (preferably earlier).  This will enable LCRC to redistribute unused time to other projects.  Large projects that do not use 70% of their time and do not report under-usage to LCRC can expect to have their allocation reduced in the next quarter.  The new allocation will be based on past usage.

All unused time at the end of the quarter is lost - they cannot be transferred to the next/later quarters.

Time granted on a given partition cannot be transferred/switched to another partition (except in cases where a software does not run due to system/software stack changes)

PIs who request > 15000 node-hours per quarter over all projects will be required to provide a "transition plan" detailing how they plan to transition their work-loads to larger DoE clusters such as ALCF/NERSC or other national platforms supported by DoE for large computational projects.
